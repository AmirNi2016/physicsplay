\documentclass{article}      % Specifies the document class

\input{../peeters_macros.tex}

\usepackage{color,cite,graphicx}
   % use colour in the document, put your citations as [1-4]
   % rather than [1,2,3,4] (it looks nicer, and the extended LaTeX2e
   % graphics package. 
\usepackage{latexsym,amssymb,epsf} % don't remember if these are
   % needed, but their inclusion can't do any damage


%
% The real thing:
%

                             % The preamble begins here.
\title{} % Declares the document's title.
\author{Peeter Joot}         % Declares the author's name.
%\date{}        % Deleting this command produces today's date.

\begin{document}             % End of preamble and beginning of text.

\maketitle{}

\section{ Motivation and preparation. }

Was playing around with what is probably traditionally a spherical trig type problem using geometric algebra (locate satellite position using angle measurements from two well separated points).  Origin of the problem was just me looking at my Feynman Lectures introduction where there is a diagram illustrating how trianglulation could be used to locate "Sputnik" and thought I'd try such a calculation, but in a way that I thought was more realistic.

\begin{figure}[htp]
\centering
\includegraphics[totalheight=0.4\textheight]{satellite}
\caption{Satellite location by measuring direction from two points.}\label{fig:satellite}
\end{figure}

Figure \ref{fig:satellite} illustrates the problem I attempted to solve.  Pick two arbitrary points $P_1$, and $P_2$ on the globe, separated far enough that the curvature of the earth may be a factor.

Place a fixed reference frame at the center of the earth.  In the figure this is shown translated to the $(0,0)$ point (equator and prime meridian intersection).  I've picked $\Be_1$ facing east, $\Be_2$ facing north, and $\Be_3$ facing outwards from the core.

Each point $P_i$ can be located by a rotation along the equatorial plane by angle $\lambda_i$ (measured with an east facing orientation (direction of $\Be_1$), and a rotation $\psi_i$ towards the north (directed towards $\Be_2$).

To identify a point on the surface we translate our $(0,0)$ reference frame to that point using the
following rotor equation:

\begin{equation}\label{eqn:northrotor}
R_{\psi} = \exp(-e_{32}\psi/2) = \cos(\psi/2) - \Be_{32}\sin(\psi/2)
\end{equation}
\begin{equation}\label{eqn:eastrotor}
R_{\lambda} = \exp(-e_{31}\lambda/2) = \cos(\lambda/2) - \Be_{31}\sin(\lambda/2)
\end{equation}
\begin{equation}
R(x) = R_{\psi} R_{\lambda} x R_{\lambda}^\dagger R_{\psi}^\dagger
\end{equation}

To verify that I got the sign of these rotations right, I applied them to the unit vectors using a $\pi/2$ rotation.  We want the following for the equatorial plane rotation:

\begin{equation*}
R_{\lambda}(\pi/2)
\begin{bmatrix}
\Be_1 \\
\Be_2 \\
\Be_3 \\
\end{bmatrix}
R_{\lambda}(\pi/2)^\dagger
=
\begin{bmatrix}
-\Be_3 \\
\Be_2 \\
\Be_1 \\
\end{bmatrix}
\end{equation*}

And for the northwards rotation:

\begin{equation*}
R_{\psi}(\pi/2)
\begin{bmatrix}
\Be_1 \\
\Be_2 \\
\Be_3 \\
\end{bmatrix}
R_{\psi}(\pi/2)^\dagger
=
\begin{bmatrix}
\Be_1 \\
\Be_2 \\
-\Be_3 \\
\end{bmatrix}
\end{equation*}

Verifying this is simple enough using the explicit sine and cosine expansion of the rotors in equation \ref{eqn:northrotor} and \ref{eqn:eastrotor}.

Once we have the ability to translate our reference frame to each point on the Earth, we can use the inverse rotation to translate our measured unit vector
to the satellite at that point back to the reference frame.

Suppose one calculates a local unit vector $\alpha'$ towards the satellite by measuring direction cosines in our local reference frame (ie: angle from gravity opposing (up facing) direction, east, and north directions at that point).
Once that's done, that unit vector $\alpha$ in our reference frame is obtained by inverse rotation:

\begin{equation}
\alpha = R_{\lambda_i}^\dagger R_{\psi_i}^\dagger \alpha' R_{\psi_i} R_{\lambda_i}
\end{equation}

The other place we need this rotation for is to calculate the points $P_i$ in our reference from (treating this now as being at the core of the earth).  This is just:

\begin{equation}
P_i = R_{\psi} R_{\lambda} A_i \Be_3 R_{\lambda}^\dagger R_{\psi}^\dagger
\end{equation}

Where $A_i$ is the altitude (relative to the center of the earth) at the point of interest.

\section{ Solution }

Solving for the position of the satellite $P_s$ we have:

\[
P_s = a_1 \alpha_1 + P_1 = a_2 \alpha_2 + P_2
\]

Solution of this follows directly by taking wedge products.  Solve for $a_1$ for example, we wedge with $\alpha_2$ :

\[
a_1 \alpha_1 \wedge \alpha_2 + P_1 \wedge \alpha_2 = a_2 \underbrace{\alpha_2 \wedge \alpha_2}_{=0} + P_2 \wedge \alpha_2
\]

Provided the points are far enough apart to get distinct $\alpha_i$ measurements, then we have:
\[
a_1 = \frac{(P_2-P_1) \wedge \alpha_2}{ \alpha_1 \wedge \alpha_2 }.
\]

Thus the position vector from the core of earth reference frame to the satellite is:

\begin{equation}
P_s = \left(\frac{(P_2-P_1) \wedge \alpha_2}{ \alpha_1 \wedge \alpha_2 }\right) \alpha_i + P_1
\end{equation}

Notice how all the trigonometry is encoded directly in the rotor equations.  If one had to calculate all this using the spherical trigonometry generalized triangle relations I expect that you'd have an ungodly mess of sine and cosines here.

There are still artifical aspects to this solution still.  For one it requires that the angles to the satellite be measured concurrently.  We also would likely get a better result if more points are used, and in that case we really need a least squares approach to the final solution.  How would one formulate this?

\section{ Question.  Order of latitude and longitude rotors? }

%I'm pretty sure that I solved the problem, but have a question about a small detail that I glossed over.  I'll describe a bit of the context as background.

%Part of my solution requires the measured unit vector be rotated back to a reference frame (ie: measure direction cosines in a local frame with frame dir vectors north facing, east facing, and up facing).  If I fix a reference frame at (0,0) ( equator/gren. intersection, e1 = east, e2 = north, e3 = up at that point), I can rotate to any given longitude/latitude (and thus inverse rotate my measured direction vector to the satellite location) using the following rotor:
%
%\[
%R = R_{g} R_{e} = \exp(-e_3 \wedge e_1 \lambda/2)\exp(-e_3 \wedge e_1 \psi/2)
%\]
%
%where $\lambda$ is the east directed angle measurement, and $\psi$ is the angle to the north from the equator.  This gives a combined rotor equation of:
%
%\[
%x' = R x R^\dagger
%\]

Looking at a globe, it initially seemed clear to me that these "perpendicular" (abusing the word) rotations could be applied in either order, but their rotors definitely don't commute, so I assume that together the non-commutive bits of the rotors "cancel out".

Question, is it actually true that the end effect of applying these rotors in either order is the same?

\[
x' = R_{\psi} R_{\lambda} x R_{\lambda}^\dagger R_{\psi}^\dagger = R_{\lambda} R_{\psi} x R_{\psi}^\dagger R_{\lambda}^\dagger
\]

Attempting to show this is true or false by direct expansion is not productive (perhaps would be okay with a symbolic GA calculator).  FIXME: write up my attempt to reduce this anylytically.  This appears to show that the rotation order does matter.  A numeric confirmation/denial is likely prudent.

\end{document}               % End of document.
