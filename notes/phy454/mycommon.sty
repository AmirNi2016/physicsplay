% for captionof
% also using caption for color captions:
% http://www.latex-community.org/forum/viewtopic.php?f=45&p=42828
%\usepackage[svgnames]{xcolor}
\usepackage{caption}
\captionsetup{labelfont={color=DarkOliveGreen,bf},textfont={color=Maroon}}

\usepackage[answerdelayed]{exercise}
\usepackage[]{makeidx}

\input{../peeters_macros.tex}

% make this one a citation to an external notes compilation, but an actual formula reference
% when that 'chapter' is eventually included in the notes compilation.
\newcommand{\inbookref}[2]{\ref{#2}}

\newcommand{\FIXME}[1]{\paragraph{EDITING NOTE}\par#1}

%-----------------------------------------------------------------------------------
% remove the centerline that we have in exercise.sty
% and add some color.  and add chapter numbers.
%
%\renewcommand{\ExerciseHeader}{\leftline{\textbf{\large\color{DarkOliveGreen}{\ExerciseName\ \thechapter.\ExerciseHeaderNB} \color{Maroon}{\ExerciseHeaderTitle}\ExerciseHeaderOrigin\medskip}}}
%\renewcommand{\AnswerHeader}{\medskip\leftline{\textbf{\color{Maroon}{Answer for \ExerciseName}\ \color{DarkOliveGreen}{\thechapter.\ExerciseHeaderNB}}\smallskip}}
%-----------------------------------------------------------------------------
% Better: chapter numbers within exersize counters.  Let the chngcntr package do the work (it also works properly across a chapter boundary)
% http://tex.stackexchange.com/questions/27444/number-exercises-according-to-chapter
%
%\usepackage[]{chngcntr}
%\newcounter{Example}
%\counterwithin{Example}{chapter}
%\counterwithin{Exercise}{chapter}
%\counterwithin{Answer}{chapter}
%-----------------------------------------------------------------------------
% use of chngcntr as above worked fine until I started using Examples.  Here's the issue and solution:
%
% http://tex.stackexchange.com/questions/56927/help-with-exercise-sty-counter-not-shown-incremented#56933
\renewcounter{Exercise}[chapter]
\makeatletter
\renewcommand{\theExercise}{\if@ExeStared\else\thechapter.\arabic{\@ExerciseCounter}\fi}
\makeatother
\newcounter{Example}
\renewcounter{Example}[chapter]
%-----------------------------------------------------------------------------
\renewcommand{\ExerciseHeader}{\leftline{\textbf{\large\color{DarkOliveGreen}{\ExerciseName\ \ExerciseHeaderNB} \color{Maroon}{\ExerciseHeaderTitle}\ExerciseHeaderOrigin\medskip}}}
\renewcommand{\AnswerHeader}{\medskip\leftline{\textbf{\color{Maroon}{Answer for \ExerciseName}\ \color{DarkOliveGreen}{\ExerciseHeaderNB}}\smallskip}}
%-----------------------------------------------------------------------------

%--------------------------------------------------------------------------------------------
% color equation numbers:
% http://tex.stackexchange.com/questions/28903/changing-the-apperance-of-equation-numbers-with-amsmath/28907#28907
% http://tex.stackexchange.com/questions/50521/coloured-equation-number-without-changing-colour-of-reference-using-hyperref
\makeatletter
\let\mytagform@=\tagform@
\def\tagform@#1{\maketag@@@{\color{DarkOliveGreen}(#1)}}
\makeatother
%--------------------------------------------------------------------------------------------

\makeindex

\newtheorem{mydefinition}[theorem]{\color{DarkOliveGreen}Definition}

\newcommand{\makedefinition}[3]{
\begin{mydefinition}%
\emph{(\color{Maroon}{#1})}%
\label{#2}%
\par%
#3%
\end{mydefinition}%
}

\newcommand{\makeexample}[3]{%
\begin{Exercise}[%
title={#1},%
label={#2},%
name={Example},%
counter={Example}%
]%
#3%
\end{Exercise}%
}
%\addcontentsline{toc}{section}{Example \thechapter.\theExample\ #1}
%\pdfbookmark[1]{Example \thechapter.\theExample\ #1}{ex\thechapter.\theExample}

\newcommand{\makeproblem}[3]{%
\begin{Exercise}[%
title={#1},%
label={#2}%
]%
#3%
\end{Exercise}%
}
%\addcontentsline{toc}{section}{Example \thechapter.\theExercise\ #1}
%\pdfbookmark[1]{Example \thechapter.\theExercise\ #1}{ex\thechapter.\theExercise}

\newcommand{\makeanswer}[2]{%
\begin{Answer}[%
ref={#1}
]%
#2%
\end{Answer}%
}

% didn't end up needing these.  used chngcntr instead.
%\newcommand{\mychapter}[0]{\renewcounter{Example}\renewcounter{Problem}\chapter}
%\newcommand{\mychapter}[0]{\chapter}

%------------------------------------------------------------------------------------
% http://tex.stackexchange.com/questions/21290/how-to-make-left-right-pairs-of-delimiter-work-over-multiple-lines
% breqn package supports \left \right over multiple lines.

\usepackage{breqn}
